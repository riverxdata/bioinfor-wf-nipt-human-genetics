process.executor="slurm"
process.cache = "deep"
process {
  withLabel: 'process_low' {
    cpus = 2
    memory = '2 GB'
    time = '30m'
  }

  withLabel: 'process_medium' {
    cpus = 8
    memory = '16 GB'
    time = '2h'
  }

  withLabel: 'process_high' {
    cpus = 32
    memory = '64 GB'
    time = '6h'
  }
}

profiles {
    docker {
        docker.enabled          = true
        conda.enabled           = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        apptainer.enabled       = false
        docker.runOptions       = '-u $(id -u):$(id -g)'
    }
}
docker.registry      = 'docker.io'

process {
    publishDir = [
        path: { "${params.outdir}/${task.process.toLowerCase()}" },
        mode: "copy",
        enabled: true
    ]
}